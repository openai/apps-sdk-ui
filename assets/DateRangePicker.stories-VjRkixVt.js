import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{a as j,D as w,i as P,I as G,g as ye,c as De,d as xe,b as ve,e as E}from"./dateUtils-dIPPvFGM.js";import{r as m}from"./index-CDlOlYQx.js";import{u as Se}from"./useLatestValue-DL0UuayD.js";import{P as $}from"./index-D5s9QLGj.js";import{u as de}from"./useBreakpoints-ChX5TJS7.js";import{w as Y}from"./helpers-f26tJ_7u.js";import"./index-BNAx77fs.js";import{s as Re,V as ue,Y as me,Z as _e}from"./index-vTu4Yset.js";import{B as A,T as Ce}from"./index-DZdtDvV8.js";import{c as pe}from"./clsx-B-dksMZM.js";import{S as be}from"./index-C9ZQDE51.js";const je="_CalendarContainer_ya0tp_1",Te="_Previous_ya0tp_13",Ne="_Next_ya0tp_46",ke="_CalendarWrapper_ya0tp_85",Oe="_CalendarRange_ya0tp_90",we="_ButtonText_ya0tp_94",Pe="_Calendar_ya0tp_1",Ie="_Week_ya0tp_117",Me="_DayLabel_ya0tp_126",Ve="_MonthLabel_ya0tp_138",Le="_Day_ya0tp_126",qe="_InteractiveDay_ya0tp_226",ze="_TodayDot_ya0tp_272",Ee="_Shortcuts_ya0tp_289",f={CalendarContainer:je,Previous:Te,Next:Ne,CalendarWrapper:ke,CalendarRange:Oe,ButtonText:we,Calendar:Pe,Week:Ie,DayLabel:Me,MonthLabel:Ve,Day:Le,InteractiveDay:qe,TodayDot:ze,Shortcuts:Ee},U=m.createContext(null),F=()=>{const e=m.use(U);if(!e)throw new Error("DateRange components must be wrapped in <DateRangePicker />");return e};try{U.displayName="DateRangeContext",U.__docgenInfo={description:"",displayName:"DateRangeContext",props:{}}}catch{}const Ae=210,Fe=32,ge=Ae+Fe,We=()=>{const{value:e,min:a,max:n,maxRangeDays:s,onChangeRef:l}=F(),i=de("sm"),p=m.useRef(null),[o,u]=m.useState(null),[g,S]=m.useState(0),[T,k]=m.useState(0),[D,h]=m.useState(()=>i?J((e==null?void 0:e[0])??w.now(),n):(e==null?void 0:e[0])??w.now()),d=i?D.plus({months:1}).startOf("month"):D.startOf("month"),N=!a||P(a,D.startOf("month")),O=!n||P(d.endOf("month"),n),x=()=>{S(r=>r+1),h(r=>r.plus({months:1}))},R=()=>{S(r=>r-1),h(r=>r.minus({months:1}))},c=r=>{if(!o){u([r,r]);return}const[y]=o;if(P(r,y)){u([r,r]);return}l.current([y,r]),u(null)},_=r=>{o&&u(y=>{if(!y)return y;const[v]=y;return P(r,v)?[v,v]:[v,r]})},C=()=>{o&&u(r=>{if(!r)return r;const[y]=r;return[y,y]})},b=o||e;return m.useEffect(()=>{if(!e)return;u(null);const r=G.fromDateTimes(D.startOf("month"),d.endOf("month"));r.contains(e[0])||r.contains(e[1])||(u(null),S(0),h(i?J(e[0],n):e[0]),k(v=>v+1))},[e]),m.useEffect(()=>{Y(()=>{var v;const r=p.current;if(!r)return;let y=-1/0;(v=r.querySelectorAll("[data-calendar]"))==null||v.forEach(W=>{const B=W.clientHeight;W.closest("[data-exiting")||B>y&&(y=B)}),r.style.height=`${y}px`,r.style.transition||Y(()=>{r.style.transition="height 0.25s var(--cubic-move)"})})},[D]),t.jsx("div",{className:f.CalendarWrapper,children:t.jsxs("div",{ref:p,className:f.CalendarContainer,onMouseLeave:C,children:[t.jsx("div",{className:f.Previous,children:t.jsx(A,{variant:"ghost",color:"secondary",size:"sm",pill:!1,gutterSize:"2xs",iconSize:"sm",onClick:R,disabled:!N,children:t.jsx(ue,{})})}),t.jsx("div",{className:f.Next,children:t.jsx(A,{variant:"ghost",color:"secondary",size:"sm",pill:!1,gutterSize:"2xs",iconSize:"sm",onClick:x,disabled:!O,children:t.jsx(me,{})})}),t.jsx("div",{className:f.CalendarRange,style:{transform:`translate(${g*-1*ge}px, 0)`},children:t.jsxs(Ce,{enterDuration:400,exitDuration:400,children:[t.jsx(Z,{stepPosition:g,date:D,selectedDates:b,min:a,max:n,selectionStart:o==null?void 0:o[0],maxRangeDays:s,isSelecting:!!o,onDateSelect:c,onDateMouseEnter:_},D.toLocaleString({month:"long",year:"numeric"})),i&&t.jsx(Z,{stepPosition:g+1,date:d,selectedDates:b,min:a,max:n,selectionStart:o==null?void 0:o[0],maxRangeDays:s,isSelecting:!!o,onDateSelect:c,onDateMouseEnter:_},d.toLocaleString({month:"long",year:"numeric"}))]})})]})},`stable-view-${T}`)},Be=["Su","Mo","Tu","We","Th","Fr","Sa"],Z=({date:e,selectedDates:a,min:n,max:s,selectionStart:l,maxRangeDays:i,isSelecting:p,onDateSelect:o,onDateMouseEnter:u,stepPosition:g})=>{const[S]=m.useState(g),{startOfMonth:T,weeks:k,enabledInterval:D}=m.useMemo(()=>{const x=e.startOf("month"),R=e.endOf("month"),c=x.weekday%7,_=new Array(c).fill(null),C=ye(x),b=[..._,...C],r=G.fromDateTimes(n||x,s||R);return{startOfMonth:x,endOfMonth:R,weeks:De(b,7),enabledInterval:r}},[e,n,s]),[h,d]=a||[],N=l&&i!=null?l.plus({days:i-1}):void 0,O=m.useMemo(()=>!h||!d?null:G.fromDateTimes(h.startOf("day"),d.endOf("day")),[h,d]);return t.jsxs("div",{className:f.Calendar,style:{left:S*ge},"data-calendar":!0,children:[t.jsxs("p",{className:f.MonthLabel,children:[T.monthLong," ",T.year]}),t.jsx("div",{className:f.Week,children:Be.map(x=>t.jsx("div",{className:f.DayLabel,children:x},x))}),k.map((x,R)=>t.jsx("div",{className:f.Week,children:x.map((c,_)=>{if(!c)return t.jsx("div",{className:f.Day},`${R}-${_}`);const C=D.contains(c)&&!(p&&N&&xe(c,N)),b=C&&h&&j(c,h),r=C&&d&&j(c,d),v=h&&d&&!j(h,d)&&(O==null?void 0:O.contains(c)),W=ve(c),B=c.day===1&&c.weekday!==7&&v&&!b,fe=c.day===c.daysInMonth&&c.weekday!==6&&v&&!r;return t.jsx("div",{className:f.Day,"data-is-start":b?"":void 0,"data-is-end":r?"":void 0,"data-is-in-range":v?"":void 0,"data-is-first-range-trail":B?"":void 0,"data-is-last-range-trail":fe?"":void 0,children:t.jsxs("button",{className:f.InteractiveDay,disabled:!C,onClick:()=>c&&(o==null?void 0:o(c)),onMouseEnter:()=>c&&(u==null?void 0:u(c)),children:[c.day,W&&t.jsx("span",{className:f.TodayDot})]})},_)})},R))]})},H=({shortcuts:e})=>{const a=de("md"),{value:n,onChangeRef:s}=F();return!a||!(e!=null&&e.length)?null:t.jsx("div",{className:f.Shortcuts,children:e.map(l=>{const{label:i,getDateRange:p}=l,o=p(),[u,g]=o,S=!!n&&j(n[0],u)&&j(n[1],g);return t.jsxs(A,{className:"mb-1",variant:"ghost",color:"primary",pill:!1,size:"md",iconSize:"sm",block:!0,selected:S,onClick:()=>s.current(o,l),children:[t.jsx("span",{className:f.ButtonText,children:i}),S&&t.jsx(Re,{})]},i)})})},J=(e,a)=>a?P(e.endOf("month"),a)?e:e.minus({months:1}):e;try{H.displayName="DateRangeShortcuts",H.__docgenInfo={description:"",displayName:"DateRangeShortcuts",props:{shortcuts:{defaultValue:null,description:"",name:"shortcuts",required:!1,type:{name:"DateRangeShortcut[]"}}}}}catch{}const Ue="_StepperControl_8oiiv_1",$e="_StepperPrevious_8oiiv_6",Ge="_StepperNext_8oiiv_7",He="_RangeTextSeparator_8oiiv_17",z={StepperControl:Ue,StepperPrevious:$e,StepperNext:Ge,RangeTextSeparator:He},X=e=>{const{value:a,min:n,max:s,disabled:l,variant:i,pill:p,size:o,block:u,triggerStepperUnit:g,triggerClassName:S,clearable:T,dropdownIconType:k,triggerShowIcon:D,onChangeRef:h}=F(),d=m.useMemo(()=>Ze(a,g,{min:n,max:s}),[a,g,n,s]),N=()=>{h.current(null)};return t.jsx(be,{className:pe(d&&z.StepperControl,S),selected:!!a,variant:i,pill:p,block:u,size:o,disabled:l,StartIcon:D&&!d?_e:void 0,dropdownIconType:d?"none":k,onClearClick:T&&!d?N:void 0,...e,children:d?t.jsx(Xe,{}):t.jsx(Ye,{})})},Xe=()=>{const{value:e,min:a,max:n,disabled:s,onChangeRef:l}=F();if(!e)return null;const[i,p]=e,o=!a||P(a,i.startOf("month")),u=!n||P(p.endOf("month"),n);return t.jsxs("span",{className:"flex",children:[t.jsx(A,{className:z.StepperPrevious,color:"secondary",variant:"ghost",disabled:s||!o,size:"3xs",uniform:!0,pill:!0,onPointerDown:g=>{g.stopPropagation(),l.current(E(i.minus({months:1}),{min:a,max:n}))},children:t.jsx(ue,{})})," ",t.jsxs("span",{className:pe(z.TriggerText,"min-w-[120px] text-center"),children:[i.monthLong," ",i.year]}),t.jsx(A,{className:z.StepperNext,color:"secondary",variant:"ghost",disabled:s||!u,size:"3xs",uniform:!0,pill:!0,onPointerDown:g=>{g.stopPropagation(),l.current(E(i.plus({months:1}),{min:a,max:n}))},children:t.jsx(me,{})})]})},Ye=()=>{const{placeholder:e,value:a,triggerDateFormat:n,shortcuts:s}=F(),l=m.useMemo(()=>{if(!(!a||!(s!=null&&s.length)))return s.find(i=>{const[p,o]=i.getDateRange();return j(p,a[0])&&j(o,a[1])})},[a,s]);return t.jsx(t.Fragment,{children:l?t.jsx("span",{className:"inline-block",children:l.label}):a&&j(a[0],a[1])?t.jsx("span",{className:"inline-block tabular-nums",children:a[0].toFormat(n)}):a?t.jsxs("span",{className:"inline-block tabular-nums",children:[a[0].toFormat(n),t.jsx("span",{className:z.RangeTextSeparator,children:"-"}),a[1].toFormat(n)]}):e})},Ze=(e,a,{min:n,max:s}={})=>{if(!e||!a)return!1;const[l,i]=e,[p,o]=E(l,{min:n,max:s});return j(p,l)&&j(o,i)};try{X.displayName="DateRangeTrigger",X.__docgenInfo={description:"",displayName:"DateRangeTrigger",props:{}}}catch{}const q=e=>{const{value:a,onChange:n,min:s,max:l,maxRangeDays:i,shortcuts:p,side:o="bottom",sideOffset:u=8,align:g="center",alignOffset:S,variant:T="outline",size:k="md",clearable:D=!1,disabled:h=!1,dropdownIconType:d,placeholder:N="Select date range...",pill:O=!1,block:x=!1,triggerStepperUnit:R,triggerClassName:c,triggerShowIcon:_=!0,triggerDateFormat:C="MM/dd/yy"}=e;if(s&&l&&!P(s,l))throw new Error("DateRangePicker error: `min` date must be before the `max` date");const b=Se(n),r=m.useMemo(()=>({value:a,min:s,max:l,maxRangeDays:i,variant:T,size:k,dropdownIconType:d,clearable:D,disabled:h,placeholder:N,block:x,pill:O,shortcuts:p,triggerStepperUnit:R,triggerClassName:c,triggerShowIcon:_,triggerDateFormat:C,onChangeRef:b}),[a,s,l,i,T,k,d,D,h,N,x,O,p,R,c,_,C,b]);return t.jsx(U,{value:r,children:t.jsxs($,{children:[t.jsx($.Trigger,{children:t.jsx(X,{})}),t.jsx($.Content,{minWidth:230,side:o,sideOffset:u,align:g,alignOffset:S??(g==="center"?0:-5),children:t.jsxs("div",{className:"flex",children:[t.jsx(H,{shortcuts:p}),t.jsx(We,{})]})})]})})};try{q.displayName="DateRangePicker",q.__docgenInfo={description:"",displayName:"DateRangePicker",props:{value:{defaultValue:null,description:"The selected date range value.",name:"value",required:!0,type:{name:"DateRange | null"}},onChange:{defaultValue:null,description:"Handler that is triggered when the date range changes.",name:"onChange",required:!0,type:{name:"(nextValue: DateRange | null, shortcut?: DateRangeShortcut | undefined) => void"}},min:{defaultValue:null,description:"Defines the earliest selectable date (inclusive).",name:"min",required:!1,type:{name:"DateTime<boolean>"}},max:{defaultValue:null,description:"Defines the latest selectable date (inclusive).",name:"max",required:!1,type:{name:"DateTime<boolean>"}},maxRangeDays:{defaultValue:null,description:`Maximum length of the selectable range in days (inclusive).
When set, the end date cannot be more than this many days after the start date.`,name:"maxRangeDays",required:!1,type:{name:"number"}},shortcuts:{defaultValue:null,description:"List of date range shortcuts displayed for quick selection, shown to the left of the calendar.",name:"shortcuts",required:!1,type:{name:"DateRangeShortcut[]"}},side:{defaultValue:{value:"bottom"},description:"The preferred side of the trigger to render against when open. Will be reversed when collisions occur.",name:"side",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'}]}},sideOffset:{defaultValue:{value:"8"},description:"The distance in pixels from the trigger.",name:"sideOffset",required:!1,type:{name:"number"}},align:{defaultValue:{value:"center"},description:"The preferred alignment against the trigger. May change when collisions occur.",name:"align",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'},{value:'"center"'}]}},alignOffset:{defaultValue:{value:"0"},description:'An offset in pixels from the "start" or "end" alignment options.',name:"alignOffset",required:!1,type:{name:"number"}},disabled:{defaultValue:{value:"false"},description:"Disables the select visually and from interactions",name:"disabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:{value:"Select date range..."},description:"Placeholder text for the select",name:"placeholder",required:!1,type:{name:"string"}},variant:{defaultValue:{value:"outline"},description:"Style variant for the select trigger",name:"variant",required:!1,type:{name:"enum",value:[{value:'"soft"'},{value:'"outline"'},{value:'"ghost"'}]}},pill:{defaultValue:{value:"false"},description:"Determines if the select trigger should be a fully rounded pill shape",name:"pill",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"md"},description:"Determines size of the size and spacing of the control.\n\n| 3xs     | 2xs     | xs      | sm      | md      | lg      | xl      | 2xl     | 3xl     |\n| ------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- |\n| `22px`  | `24px`  | `26px`  | `28px`  | `32px`  | `36px`  | `40px`  | `44px`  | `48px`  |",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"2xl"'},{value:'"3xl"'},{value:'"3xs"'},{value:'"2xs"'},{value:'"xs"'}]}},dropdownIconType:{defaultValue:{value:"dropdown"},description:"Icon displayed in the far right of the select trigger",name:"dropdownIconType",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"chevronDown"'},{value:'"dropdown"'}]}},triggerClassName:{defaultValue:null,description:"Custom class applied to the select trigger",name:"triggerClassName",required:!1,type:{name:"string"}},triggerShowIcon:{defaultValue:{value:"true"},description:"Display calendar icon at the start of the trigger",name:"triggerShowIcon",required:!1,type:{name:"boolean"}},triggerStepperUnit:{defaultValue:null,description:`Allows the trigger to display as a stepper when the selected date matches the unit.
Currently 'month' is the only supported unit.`,name:"triggerStepperUnit",required:!1,type:{name:"enum",value:[{value:'"month"'}]}},triggerDateFormat:{defaultValue:{value:'"MM/dd/yy"'},description:"Format of dates displayed in the trigger",name:"triggerDateFormat",required:!1,type:{name:"string"}},clearable:{defaultValue:{value:"false"},description:"Display a clear action that allows the select to be unset.",name:"clearable",required:!1,type:{name:"boolean"}},block:{defaultValue:{value:"true"},description:"Extends select to 100% of available width.",name:"block",required:!1,type:{name:"boolean"}}}}}catch{}const Je={title:"Components/DateRangePicker",component:q,argTypes:{value:{control:!1},onChange:{control:!1},min:{control:!1},max:{control:!1},shortcuts:{control:!1},triggerClassName:{control:!1},triggerStepperUnit:{control:"select",options:[void 0,"month"]},placeholder:{control:!1},maxRangeDays:{control:"number"}}},I=e=>{const[a,n]=m.useState(null);return t.jsx(q,{...e,value:a,onChange:n,shortcuts:he})};I.args={size:"lg",pill:!0,clearable:!0};I.parameters={docs:{source:{code:`
<DateRangePicker
  value={selectedDateRange}
  onChange={(nextDateRange) => {
    setSelectedDateRange(nextDateRange);
  }}
  shortcuts={dayShortcuts}
  clearable
  pill
/>
`}}};const M=e=>{const a=w.local(),n=a.minus({days:30}).startOf("day"),s=a.endOf("day"),[l,i]=m.useState(()=>E(a,{min:n,max:s}));return t.jsx(q,{...e,value:l,onChange:i,min:n,max:s})};M.args={size:"lg",pill:!0,triggerShowIcon:!0};M.parameters={docs:{source:{code:`
const today = DateTime.local()
const minDate = today.minus({ days: 120 }).startOf("day")
const maxDate = today.endOf("day")
const [selectedDateRange, setSelectedDateRange] = useState<DateRange | null>(() =>
  getMonthStartAndEnd(today, { min: minDate, max: maxDate }),
)

return (
  <DateRangePicker
    ...
    min={minDate}
    max={maxDate}
  />
)
`}}};const he=[{label:"Today",getDateRange:()=>{const e=w.local();return[e.startOf("day"),e.endOf("day")]}},{label:"Yesterday",getDateRange:()=>{const e=w.local().minus({days:1});return[e.startOf("day"),e.endOf("day")]}},{label:"Last 7 days",getDateRange:()=>{const e=w.local().endOf("day");return[e.minus({days:7}).startOf("day"),e.endOf("day")]}},{label:"Last 30 days",getDateRange:()=>{const e=w.local().endOf("day");return[e.minus({days:30}).startOf("day"),e.endOf("day")]}}],V=e=>{const[a,n]=m.useState(null);return t.jsx(q,{...e,value:a,onChange:n,shortcuts:he})};V.args={size:"lg",pill:!0,clearable:!0};V.parameters={docs:{source:{code:`
<DateRangePicker
  ...
  shortcuts={dayShortcuts}
/>
`}}};const L=e=>{const a=w.local(),n=a.endOf("day"),[s,l]=m.useState(()=>E(a,{max:a}));return t.jsx(q,{...e,value:s,onChange:l,max:n})};L.args={size:"lg",clearable:!0,pill:!0,triggerStepperUnit:"month"};L.parameters={docs:{source:{code:`
<DateRangePicker
  ...
  triggerStepperUnit: "month",
/>
`}}};var K,Q,ee;I.parameters={...I.parameters,docs:{...(K=I.parameters)==null?void 0:K.docs,source:{originalSource:`(args: DateRangePickerProps) => {
  const [selectedDateRange, setSelectedDateRange] = useState<DateRange | null>(null);
  return <DateRangePicker {...args} value={selectedDateRange} onChange={setSelectedDateRange} shortcuts={dayShortcuts} />;
}`,...(ee=(Q=I.parameters)==null?void 0:Q.docs)==null?void 0:ee.source}}};var te,ae,ne;M.parameters={...M.parameters,docs:{...(te=M.parameters)==null?void 0:te.docs,source:{originalSource:`(args: DateRangePickerProps) => {
  const today = DateTime.local();
  const minDate = today.minus({
    days: 30
  }).startOf("day");
  const maxDate = today.endOf("day");
  const [selectedDateRange, setSelectedDateRange] = useState<DateRange | null>(() => getMonthStartAndEnd(today, {
    min: minDate,
    max: maxDate
  }));
  return <DateRangePicker {...args} value={selectedDateRange} onChange={setSelectedDateRange} min={minDate} max={maxDate} />;
}`,...(ne=(ae=M.parameters)==null?void 0:ae.docs)==null?void 0:ne.source}}};var re,se,oe;V.parameters={...V.parameters,docs:{...(re=V.parameters)==null?void 0:re.docs,source:{originalSource:`(args: DateRangePickerProps) => {
  const [selectedDateRange, setSelectedDateRange] = useState<DateRange | null>(null);
  return <DateRangePicker {...args} value={selectedDateRange} onChange={setSelectedDateRange} shortcuts={dayShortcuts} />;
}`,...(oe=(se=V.parameters)==null?void 0:se.docs)==null?void 0:oe.source}}};var le,ie,ce;L.parameters={...L.parameters,docs:{...(le=L.parameters)==null?void 0:le.docs,source:{originalSource:`(args: DateRangePickerProps) => {
  const today = DateTime.local();
  const maxDate = today.endOf("day");
  const [selectedDateRange, setSelectedDateRange] = useState<DateRange | null>(() => getMonthStartAndEnd(today, {
    max: today
  }));
  return <DateRangePicker {...args} value={selectedDateRange} onChange={setSelectedDateRange} max={maxDate} />;
}`,...(ce=(ie=L.parameters)==null?void 0:ie.docs)==null?void 0:ce.source}}};const Ke=["Base","Limits","Shortcuts","MonthStepper"],ut=Object.freeze(Object.defineProperty({__proto__:null,Base:I,Limits:M,MonthStepper:L,Shortcuts:V,__namedExportsOrder:Ke,default:Je},Symbol.toStringTag,{value:"Module"}));export{I as B,ut as D,M as L,L as M,V as S};
