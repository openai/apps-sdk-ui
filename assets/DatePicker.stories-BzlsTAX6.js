import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{D as V,i as O,I as Y,g as Q,c as U,a as ee,b as ae}from"./dateUtils-dIPPvFGM.js";import{r as o}from"./index-CDlOlYQx.js";import{u as te}from"./useLatestValue-DL0UuayD.js";import{V as se,Y as ne,Z as re}from"./index-vTu4Yset.js";import{P as N}from"./index-D5s9QLGj.js";import{S as le}from"./index-C9ZQDE51.js";import{w as q}from"./helpers-f26tJ_7u.js";import"./index-BNAx77fs.js";import{a as oe}from"./usePopoverController-nyBlCbyw.js";import{B as L,T as ie}from"./index-DZdtDvV8.js";const ce="_CalendarContainer_18jsl_1",de="_Previous_18jsl_9",ue="_Next_18jsl_42",me="_CalendarWrapper_18jsl_81",pe="_CalendarRange_18jsl_86",fe="_Calendar_18jsl_1",he="_Week_18jsl_100",ge="_DayLabel_18jsl_109",De="_MonthLabel_18jsl_121",ve="_Day_18jsl_109",ye="_InteractiveDay_18jsl_146",xe="_TodayDot_18jsl_193",i={CalendarContainer:ce,Previous:de,Next:ue,CalendarWrapper:me,CalendarRange:pe,Calendar:fe,Week:he,DayLabel:ge,MonthLabel:De,Day:ve,InteractiveDay:ye,TodayDot:xe},I=o.createContext(null),Ce=()=>{const a=o.use(I);if(!a)throw new Error("Date components must be wrapped in <DatePicker />");return a};try{I.displayName="DateContext",I.__docgenInfo={description:"",displayName:"DateContext",props:{}}}catch{}const be=210,_e=32,Z=be+_e,Se=()=>{const{value:a,min:r,max:t,onChangeRef:g}=Ce(),d=oe(),u=o.useRef(null),[j,D]=o.useState(0),[P,w]=o.useState(0),[s,c]=o.useState(()=>a??V.now()),l=!r||O(r,s.startOf("month")),m=!t||O(s.endOf("month"),t),p=()=>{D(n=>n+1),c(n=>n.plus({months:1}))},f=()=>{D(n=>n-1),c(n=>n.minus({months:1}))},h=n=>{g.current(n),d()};return o.useEffect(()=>{if(!a)return;Y.fromDateTimes(s.startOf("month"),s.endOf("month")).contains(a)||(D(0),c(a),w(y=>y+1))},[a]),o.useEffect(()=>{q(()=>{var y;const n=u.current;if(!n)return;let v=-1/0;(y=n.querySelectorAll("[data-calendar]"))==null||y.forEach(k=>{const T=k.clientHeight;k.closest("[data-exiting")||T>v&&(v=T)}),n.style.height=`${v}px`,n.style.transition||q(()=>{n.style.transition="height 0.25s var(--cubic-move)"})})},[s]),e.jsx("div",{className:i.CalendarWrapper,children:e.jsxs("div",{ref:u,className:i.CalendarContainer,children:[e.jsx("div",{className:i.Previous,children:e.jsx(L,{variant:"ghost",color:"secondary",size:"sm",gutterSize:"2xs",pill:!1,iconSize:"sm",onClick:f,disabled:!l,children:e.jsx(se,{})})}),e.jsx("div",{className:i.Next,children:e.jsx(L,{variant:"ghost",color:"secondary",size:"sm",gutterSize:"2xs",pill:!1,iconSize:"sm",onClick:p,disabled:!m,children:e.jsx(ne,{})})}),e.jsx("div",{className:i.CalendarRange,style:{transform:`translate(${j*-1*Z}px, 0)`},children:e.jsx(ie,{enterDuration:400,exitDuration:400,children:e.jsx(Pe,{stepPosition:j,date:s,selectedDate:a,min:r,max:t,onDateSelect:h},s.toLocaleString({month:"long",year:"numeric"}))})})]})},`stable-view-${P}`)},je=["Su","Mo","Tu","We","Th","Fr","Sa"],Pe=({date:a,selectedDate:r,min:t,max:g,onDateSelect:d,stepPosition:u})=>{const[j]=o.useState(u),{startOfMonth:D,weeks:P,enabledInterval:w}=o.useMemo(()=>{const s=a.startOf("month"),c=a.endOf("month"),l=s.weekday%7,m=new Array(l).fill(null),p=Q(s),f=[...m,...p],h=Y.fromDateTimes(t||s,g||c);return{startOfMonth:s,endOfMonth:c,weeks:U(f,7),enabledInterval:h}},[a,t,g]);return e.jsxs("div",{className:i.Calendar,style:{left:j*Z},"data-calendar":!0,children:[e.jsxs("p",{className:i.MonthLabel,children:[D.monthLong," ",D.year]}),e.jsx("div",{className:i.Week,children:je.map(s=>e.jsx("div",{className:i.DayLabel,children:s},s))}),P.map((s,c)=>e.jsx("div",{className:i.Week,children:s.map((l,m)=>{if(!l)return e.jsx("div",{className:i.Day},`${c}-${m}`);const p=w.contains(l),f=p&&r&&ee(l,r),h=ae(l);return e.jsx("div",{className:i.Day,"data-is-selected":f?"":void 0,children:e.jsxs("button",{className:i.InteractiveDay,disabled:!p,onClick:()=>l&&(d==null?void 0:d(l)),children:[l.day,h&&e.jsx("span",{className:i.TodayDot})]})},m)})},c))]})},S=a=>{const{id:r,value:t,onChange:g,min:d,max:u,side:j="bottom",sideOffset:D=8,align:P="center",alignOffset:w,variant:s="outline",size:c="md",clearable:l=!1,disabled:m=!1,dropdownIconType:p,placeholder:f="Select date...",pill:h=!1,block:n=!1,triggerClassName:v,triggerShowIcon:y=!0,triggerDateFormat:k="MM/dd/yy"}=a;if(d&&u&&!O(d,u))throw new Error("DatePicker error: `min` date must be before the `max` date");const T=te(g),J=o.useMemo(()=>({value:t,min:d,max:u,variant:s,size:c,dropdownIconType:p,clearable:l,disabled:m,placeholder:f,block:n,pill:h,triggerClassName:v,triggerShowIcon:y,triggerDateFormat:k,onChangeRef:T}),[t,d,u,s,c,p,l,m,f,n,h,v,y,k,T]),K=()=>{T.current(null)};return e.jsx(I,{value:J,children:e.jsxs(N,{children:[e.jsx(N.Trigger,{children:e.jsx(le,{id:r,className:v,selected:!!t,variant:s,pill:h,block:n,size:c,disabled:m,StartIcon:y?re:void 0,dropdownIconType:p,onClearClick:l?K:void 0,children:e.jsx("span",{className:"tabular-nums",children:(t==null?void 0:t.toFormat(k))??f})})}),e.jsx(N.Content,{minWidth:230,side:j,sideOffset:D,align:P,alignOffset:w??(P==="center"?0:-5),children:e.jsx(Se,{})})]})})};try{S.displayName="DatePicker",S.__docgenInfo={description:"",displayName:"DatePicker",props:{id:{defaultValue:null,description:"Allow targeting the input for forms and accessibility.",name:"id",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"The selected date value.",name:"value",required:!0,type:{name:"DateTime<boolean> | null"}},onChange:{defaultValue:null,description:"Handler that is triggered when the date changes.",name:"onChange",required:!0,type:{name:"(nextValue: DateTime<boolean> | null) => void"}},min:{defaultValue:null,description:"Defines the earliest selectable date (inclusive).",name:"min",required:!1,type:{name:"DateTime<boolean>"}},max:{defaultValue:null,description:"Defines the latest selectable date (inclusive).",name:"max",required:!1,type:{name:"DateTime<boolean>"}},side:{defaultValue:{value:"bottom"},description:"The preferred side of the trigger to render against when open. Will be reversed when collisions occur.",name:"side",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'}]}},sideOffset:{defaultValue:{value:"8"},description:"The distance in pixels from the trigger.",name:"sideOffset",required:!1,type:{name:"number"}},align:{defaultValue:{value:"center"},description:"The preferred alignment against the trigger. May change when collisions occur.",name:"align",required:!1,type:{name:"enum",value:[{value:'"start"'},{value:'"end"'},{value:'"center"'}]}},alignOffset:{defaultValue:{value:"0"},description:'An offset in pixels from the "start" or "end" alignment options.',name:"alignOffset",required:!1,type:{name:"number"}},disabled:{defaultValue:{value:"false"},description:"Disables the select visually and from interactions",name:"disabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:{value:"Select date..."},description:"Placeholder text for the select",name:"placeholder",required:!1,type:{name:"string"}},variant:{defaultValue:{value:"outline"},description:"Style variant for the select trigger",name:"variant",required:!1,type:{name:"enum",value:[{value:'"soft"'},{value:'"outline"'},{value:'"ghost"'}]}},pill:{defaultValue:{value:"false"},description:"Determines if the select trigger should be a fully rounded pill shape",name:"pill",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"md"},description:"Determines size of the size and spacing of the control.\n\n| 3xs     | 2xs     | xs      | sm      | md      | lg      | xl      | 2xl     | 3xl     |\n| ------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- |\n| `22px`  | `24px`  | `26px`  | `28px`  | `32px`  | `36px`  | `40px`  | `44px`  | `48px`  |",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"2xl"'},{value:'"3xl"'},{value:'"3xs"'},{value:'"2xs"'},{value:'"xs"'}]}},dropdownIconType:{defaultValue:{value:"dropdown"},description:"Icon displayed in the far right of the select trigger",name:"dropdownIconType",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"chevronDown"'},{value:'"dropdown"'}]}},triggerClassName:{defaultValue:null,description:"Custom class applied to the select trigger",name:"triggerClassName",required:!1,type:{name:"string"}},triggerShowIcon:{defaultValue:{value:"true"},description:"Display calendar icon at the start of the trigger",name:"triggerShowIcon",required:!1,type:{name:"boolean"}},triggerDateFormat:{defaultValue:null,description:"Format of dates displayed in the trigger",name:"triggerDateFormat",required:!0,type:{name:"string"}},clearable:{defaultValue:{value:"false"},description:"Display a clear action that allows the select to be unset.",name:"clearable",required:!1,type:{name:"boolean"}},block:{defaultValue:{value:"true"},description:"Extends select to 100% of available width.",name:"block",required:!1,type:{name:"boolean"}}}}}catch{}const ke={title:"Components/DatePicker",component:S,argTypes:{value:{control:!1},onChange:{control:!1},min:{control:!1},max:{control:!1},triggerClassName:{control:!1},placeholder:{control:!1}}},x=a=>{const[r,t]=o.useState(null);return e.jsx(S,{...a,value:r,onChange:t})};x.args={size:"lg",pill:!0,clearable:!0};x.parameters={docs:{source:{code:`
<DatePicker
  value={selectedDate}
  onChange={(nextDate) => {
    setSelectedDate(nextDate);
  }}
  clearable
  pill
/>
`}}};const C=a=>{const r=V.local(),t=r.minus({days:30}).startOf("day"),g=r.plus({days:30}).endOf("day"),[d,u]=o.useState(r);return e.jsx(S,{...a,value:d,onChange:u,min:t,max:g})};C.args={size:"lg",pill:!0,triggerShowIcon:!0};C.parameters={docs:{source:{code:`
const today = DateTime.local()
const minDate = today.minus({ days: 30 }).startOf("day")
const maxDate = today.plus({ days: 30 }).endOf("day")
const [selectedDate, setSelectedDate] = useState<DateTime | null>(today)

return (
  <DatePicker
    ...
    min={minDate}
    max={maxDate}
  />
)
`}}};const b=a=>{const[r,t]=o.useState(null);return e.jsx(S,{...a,value:r,onChange:t})};b.args={size:"md",triggerShowIcon:!1,placeholder:"Choose a date"};b.parameters={docs:{source:{code:`
<DatePicker
  ...
  triggerShowIcon={false}
  placeholder="Choose a date"
/>
`}}};const _=a=>{const[r,t]=o.useState(V.local());return e.jsx(S,{...a,value:r,onChange:t})};_.args={size:"md",disabled:!0};_.parameters={docs:{source:{code:`
<DatePicker
  ...
  disabled
/>
`}}};var W,M,z;x.parameters={...x.parameters,docs:{...(W=x.parameters)==null?void 0:W.docs,source:{originalSource:`(args: DatePickerProps) => {
  const [selectedDate, setSelectedDate] = useState<DateTime | null>(null);
  return <DatePicker {...args} value={selectedDate} onChange={setSelectedDate} />;
}`,...(z=(M=x.parameters)==null?void 0:M.docs)==null?void 0:z.source}}};var R,E,A;C.parameters={...C.parameters,docs:{...(R=C.parameters)==null?void 0:R.docs,source:{originalSource:`(args: DatePickerProps) => {
  const today = DateTime.local();
  const minDate = today.minus({
    days: 30
  }).startOf("day");
  const maxDate = today.plus({
    days: 30
  }).endOf("day");
  const [selectedDate, setSelectedDate] = useState<DateTime | null>(today);
  return <DatePicker {...args} value={selectedDate} onChange={setSelectedDate} min={minDate} max={maxDate} />;
}`,...(A=(E=C.parameters)==null?void 0:E.docs)==null?void 0:A.source}}};var F,B,$;b.parameters={...b.parameters,docs:{...(F=b.parameters)==null?void 0:F.docs,source:{originalSource:`(args: DatePickerProps) => {
  const [selectedDate, setSelectedDate] = useState<DateTime | null>(null);
  return <DatePicker {...args} value={selectedDate} onChange={setSelectedDate} />;
}`,...($=(B=b.parameters)==null?void 0:B.docs)==null?void 0:$.source}}};var G,H,X;_.parameters={..._.parameters,docs:{...(G=_.parameters)==null?void 0:G.docs,source:{originalSource:`(args: DatePickerProps) => {
  const [selectedDate, setSelectedDate] = useState<DateTime | null>(DateTime.local());
  return <DatePicker {...args} value={selectedDate} onChange={setSelectedDate} />;
}`,...(X=(H=_.parameters)==null?void 0:H.docs)==null?void 0:X.source}}};const Te=["Base","Limits","WithoutIcon","Disabled"],Ee=Object.freeze(Object.defineProperty({__proto__:null,Base:x,Disabled:_,Limits:C,WithoutIcon:b,__namedExportsOrder:Te,default:ke},Symbol.toStringTag,{value:"Module"}));export{x as B,Ee as D,C as L,b as W,_ as a};
